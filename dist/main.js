(()=>{"use strict";var e={249:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FuncCanvas=void 0,t.FuncCanvas=class{constructor(e){this.canvas=document.createElement("canvas"),this.canvas.width=100,this.canvas.height=100,this.canvas.tabIndex=1e3,this.canvas.addEventListener("mousemove",this.handleMouse.bind(this)),e.appendChild(this.canvas),this.func=new Float32Array(100),requestAnimationFrame(this.renderLoop.bind(this))}handleMouse(e){if(e.buttons>0){const t=(100-e.offsetY)/100,s=Math.round(e.offsetX);this.func[s]=t}}renderLoop(){const e=this.canvas.getContext("2d");e.clearRect(0,0,this.canvas.width,this.canvas.height);for(let t=0;t<this.func.length;++t){const s=this.func[t];e.fillRect(t,99-100*s,1,1)}requestAnimationFrame(this.renderLoop.bind(this))}}},138:(e,t,s)=>{const i=s(671);setTimeout((function(){new i.Synth}))},671:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Synth=void 0;const i=s(249);t.Synth=class{constructor(){this.lastKey="",console.log("Constructing synth...");const e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.innerText="Click here for focus!",t.tabIndex=1,t.contentEditable="true",t.spellcheck=!1,e.appendChild(t),t.addEventListener("click",(()=>{this.initialize()})),t.addEventListener("keydown",this.handleKey.bind(this)),t.addEventListener("keyup",this.handleKey.bind(this));const s=document.createElement("div");e.appendChild(s),this.adsFunc=new i.FuncCanvas(s),this.rFunc=new i.FuncCanvas(s),this.lowPassFunc=new i.FuncCanvas(s)}initialize(){this.audioCtx||(this.audioCtx=new AudioContext,this.oscilatorNode=new OscillatorNode(this.audioCtx,{type:"triangle"}),this.oscilatorNode.frequency.setValueAtTime(256,this.audioCtx.currentTime),this.lowPassNode=new BiquadFilterNode(this.audioCtx,{type:"lowpass"}),this.oscilatorNode.connect(this.lowPassNode),this.gainNode=new GainNode(this.audioCtx),this.lowPassNode.connect(this.gainNode),this.gainNode.gain.setValueAtTime(0,this.audioCtx.currentTime),this.gainNode.connect(this.audioCtx.destination),this.oscilatorNode.start())}handleKey(e){if("keyup"==e.type)this.setAmplitude(0),this.lastKey="";else if("keydown"==e.type){if(this.lastKey===e.key)return;switch(e.key){case"a":this.setNote(0);break;case"w":this.setNote(1);break;case"s":this.setNote(2);break;case"e":this.setNote(3);break;case"d":this.setNote(4);break;case"f":this.setNote(5);break;case"t":this.setNote(6);break;case"g":this.setNote(7);break;case"y":this.setNote(8);break;case"h":this.setNote(9);break;case"u":this.setNote(10);break;case"j":this.setNote(11);break;case"k":this.setNote(12)}this.setAmplitude(1),this.lastKey=e.key}}scaleCurve(e,t){const s=[];for(const i of e)s.push(i*t);return s}offsetCurve(e,t){const s=[];for(const i of e)s.push(i+t);return s}setAmplitude(e){let t=this.audioCtx.currentTime;if(this.gainNode.gain.cancelScheduledValues(t),e<=0){const e=this.gainNode.gain.value,s=this.scaleCurve(this.rFunc.func,e);this.gainNode.gain.setValueCurveAtTime(s,t,2),this.gainNode.gain.setValueAtTime(0,2.01)}else{this.lowPassNode.frequency.cancelScheduledValues(t),this.gainNode.gain.setValueCurveAtTime(this.adsFunc.func,t,2);const e=this.oscilatorNode.frequency.value,s=this.offsetCurve(this.scaleCurve(this.lowPassFunc.func,32*e),e);this.lowPassNode.frequency.setValueCurveAtTime(s,t,2)}}setNote(e){const t=e+60,s=Math.pow(2,1/12),i=440*Math.pow(s,t-69);this.oscilatorNode.frequency.setValueAtTime(i,this.audioCtx.currentTime)}}}},t={};!function s(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}(138)})();